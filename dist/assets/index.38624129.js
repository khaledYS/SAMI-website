import{i as v,M as y,g as p,j as f,r as o,o as E,P as w,h as N,_ as A,b as g,s as I,R,a as S,u as x,G as _,c as C,F as D,O as P,d as B,B as L,e as O,f as d}from"./vendor.065d3cc6.js";const U=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(t){if(t.ep)return;t.ep=!0;const a=n(t);fetch(t.href,a)}};U();console.log({VITE_FIREBASE_API_KEY:"AIzaSyB0tXq7DVY4LhZSKIDRdxmJs0fyhXSHCiE",VITE_FIREBASE_AUTH_DOMAIN:"sami-db.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"sami-db",VITE_STORAGE_BUCKET:"sami-db.appspot.com",VITE_FIREBASE_SENDER_ID:"839799892332",VITE_FIREBASE_APP_ID:"1:839799892332:web:e03429d145bbcdb106eb49",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0});const T={apiKey:"AIzaSyB0tXq7DVY4LhZSKIDRdxmJs0fyhXSHCiE",authDomain:"sami-db.firebaseapp.com",projectId:"sami-db",storageBucket:{}.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:"839799892332",appId:"1:839799892332:web:e03429d145bbcdb106eb49"},u=v(T),b=y(u),F=p(u),e=f.exports.jsx,l=f.exports.jsxs;function V({children:s}){return o.exports.useState(0),e("div",{className:"App w-full h-full",children:s})}const h=o.exports.createContext();function k({children:s}){const[r,n]=o.exports.useState(!0);return l(h.Provider,{value:{loading:r,setLoading:n},children:[r&&e("div",{className:"fixed h-full w-full bg-[rgba(0,0,0,.84)] backdrop-filter grid place-items-center",children:l("div",{className:"lds-spinner",children:[e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{})]})}),s]})}const m=o.exports.createContext();function j({children:s}){const{setLoading:r}=o.exports.useContext(h),[n,i]=o.exports.useState(null);return o.exports.useEffect(()=>{E(F,async t=>{if(!t)return i(null),r(!1),null;i(t);try{const a=w(b,"users",t==null?void 0:t.email);(await N(a)).exists()||await A(a,{createdAt:g(),displayName:t.displayName,email:t.email,emailVerified:t.emailVerified,photoURl:t.providerData[0].photoURL,uid:t.uid}),console.log("hahha")}catch(a){console.log(a),alert(a)}finally{r(!1),console.log("turned of here")}})},[]),e(m.Provider,{value:{currentUser:n},children:s})}function M(){const{currentUser:s}=o.exports.useContext(m),{setLoading:r}=o.exports.useContext(h);return l("div",{className:"w-full h-full text-white",children:[e("div",{className:"bg-white px-2 py-1 rounded-b-xl",children:e("img",{src:s.providerData[0].photoURL,onClick:()=>{I(p(u))},className:"max-w-[45px] rounded-full mx-auto cursor-pointer hover:brightness-50 transition-all"})}),e("div",{className:"h-full w-full grid place-items-center",children:l("div",{className:"w-full block",children:[e("div",{className:"grid place-items-center w-full Rboto-Font font-semibold text-2xl mb-5",children:l("h1",{children:["Hi ",s.displayName]})}),l("form",{className:"bg-white px-4 py-2 rounded-lg text-lg max-w-[500px] mx-auto text-black flex flex-col",onSubmit:async n=>{n.preventDefault();const i={instaUsername:n.target.username.value,instaMessage:n.target.message.value,sender:{email:s.email,displayName:s.displayName},createdAt:g()};r(!0);try{n.target.username.value="",n.target.message.value="";let t=await fetch(`https://sendanonymousmessageinstaapi.herokuapp.com/send/anonymous/message/${i.instaUsername}/${i.instaMessage}`);if(t=await t.json(),t.sent==!0){let a=R(b,"users",s.email,"messages");await S(a,i)}console.log(t)}catch(t){console.log(t)}finally{r(!1)}},children:[l("div",{style:{lineHeight:"1"},className:"font-bold p-4 text-center ",children:["Send A message to an Instagram User ",e("br",{})," while being anonymous !"]}),e("input",{required:!0,className:"bg-gray-200 p-1 mb-2 rounded-md",placeholder:"Username",type:"text",name:"username"}),e("textarea",{required:!0,cols:"30",rows:"2",className:"bg-gray-200 p-1 mb-2 rounded-md",placeholder:"write a message",type:"text",name:"message"}),l("div",{className:"flex justify-between text-black items-center",children:[l("div",{className:"",children:[e("input",{className:"mr-2 cursor-pointer",required:!0,type:"checkbox",value:"hiiii",name:"checkbox"}),e("label",{htmlFor:"checkbox",children:"I promise no bad words"})]}),e("input",{required:!0,type:"submit",className:"bg-[#F26800] text-white font-bold px-4 p-2 rounded-lg cursor-pointer hover:brightness-75 transition-all"})]})]})]})})]})}function q(){const s=x(),{currentUser:r}=o.exports.useContext(m);return o.exports.useEffect(()=>(r&&s("/"),null),[r]),e("div",{className:"w-full h-full grid place-items-center text-xl",children:l("button",{className:"bg-[#A3CCAB] px-4 py-2 rounded-lg Roboto-font text-center mx-auto hover:brightness-75 transition-all",onClick:()=>{(async()=>{try{const n=new _,i=await C(p(u),n);console.log(i),s("/")}catch(n){console.log(n),alert(n)}})()},children:["Signin with Google ",e(D,{className:"mx-auto text-4xl"})," "]})})}function K(){const{currentUser:s}=o.exports.useContext(m),r=x();return o.exports.useEffect(()=>{if(!s)return r("/login"),null},[s]),s&&e(P,{})}B.render(e(L,{children:e(k,{children:e(j,{children:e(V,{children:l(O,{children:[e(d,{exact:!0,path:"/",element:e(K,{}),children:e(d,{exact:!0,path:"/",element:e(M,{})})}),e(d,{exact:!0,path:"/login",element:e(q,{})}),e(d,{path:"*",element:e("h1",{style:{textAlign:"center"},children:"404, Page not found."})})]})})})})}),document.getElementById("root"));
